/* ===========================
   PastDrawsSidebar (scoped)
   Keep visuals only; layout lives in app/globals.css
   =========================== */

/* Header */
#past-draws .sidebar-header {
  /* Base: keep current compact-friendly layout for narrow screens */
  display: grid;
  grid-template-columns: minmax(0, 1fr) auto;
  grid-template-areas:
    "title primary"
    "title secondary";
  align-items: center;
  column-gap: var(--space-3);
  row-gap: var(--space-2);
  padding: var(--space-4);
  border: 0; /* remove dashed line */
  border-bottom: 1px solid var(--card-bd); /* NEW: separator */
  /* Graph paper pattern (X/Y axes) */
  background-image:
    linear-gradient(to bottom, var(--grid-line) 1px, transparent 1px),
    linear-gradient(to right,  var(--grid-line) 1px, transparent 1px);
  background-size: 32px 32px, 32px 32px;
  background-position: 0 0, 0 0;
  position: sticky;
  top: 0;
  z-index: 3; /* above table thead */
  background-color: var(--card);
}

#past-draws .sidebar-title-wrap { grid-area: title; min-width: 0; }
#past-draws .sidebar-title {
  font-weight: 700;
  font-size: var(--text-base);
  color: var(--ink-strong);
  line-height: 1.3;
  font-family: var(--font-sans), system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  white-space: normal;     /* allow wrapping */
  word-break: break-word;  /* never overflow */
  overflow: hidden;
  text-overflow: ellipsis;
}

#past-draws .sidebar-primary {
  grid-area: primary;
  justify-self: end;
  white-space: nowrap;
  max-width: 100%;
}
#past-draws .sidebar-sort-btn{
  /* Match close button visuals */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-1);
  min-width: var(--touch-target-min);
  min-height: var(--touch-target-min);
  padding: var(--space-2);
  border: 1px solid var(--card-bd);
  background: var(--card);
  background-image: none;          /* kill any inherited texture */
  border-radius: 8px;
  cursor: pointer;
  font-size: var(--text-sm);
  color: var(--fg);
  line-height: 1;
  /* Avoid header’s grid texture bleeding through the control */
  background-clip: padding-box;
  box-shadow: none;
  overflow: hidden;
  text-overflow: ellipsis;
}

#past-draws .sidebar-sort-btn:hover{
  background: var(--accent);
  color: var(--accent-contrast);
}

#past-draws .sidebar-sort-btn:focus-visible{
  outline: none;
  box-shadow: 0 0 0 2px color-mix(in oklab, var(--accent) 40%, transparent);
}

/* Keep the compact icon-only variant crisp on mobile */
#past-draws .sidebar-sort-btn .sidebar-sort-short{
  display: inline;
}
#past-draws .sidebar-secondary {
  grid-area: secondary;
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: var(--space-2);
  flex-wrap: wrap; /* keep everything visible on narrow screens */
}

/* Enable horizontal swipe gestures on touch devices
   while preserving vertical scrolling inside the panel. */
#past-draws.sidebar,
#past-draws.sidebar.right,
#past-draws.sidebar.left,
#past-draws.sidebar.bottom {
  touch-action: pan-y;     /* allow vertical scroll; we'll handle horizontal drag */
  will-change: transform;  /* smoother during drag */
}

/* Wider screens: title gets its own full-width row above controls */
@media (min-width: 430px){
  #past-draws .sidebar-header{
    /* Row 1: title spans all columns.
       Row 2: controls start at column 1 to align with title’s left edge */
    grid-template-columns: minmax(0,1fr) auto auto;
    grid-template-areas:
      "title   title     title"
      "primary secondary .";
  }
  /* Align controls to the left edge of the title */
  #past-draws .sidebar-primary   { justify-self: start; }
  #past-draws .sidebar-secondary {
    justify-content: flex-start;
    flex-wrap: nowrap;      /* single line when there’s room */
    gap: var(--space-2);
  }
}

#past-draws .sidebar-sort-btn { white-space: nowrap; }
#past-draws .sidebar-sort-btn .sidebar-sort-short,
#past-draws .sidebar-close-icon,
#past-draws .sidebar-nav-icon {
  display: none;
}

#past-draws .sidebar-compact-label {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  font-size: var(--text-xs);
  color: var(--muted);
  cursor: pointer;
}

#past-draws .sidebar-compact-label input[type="checkbox"] {
  min-width: var(--space-4);
  min-height: var(--space-4);
}

/* Close "X" — mirror FiltersPanel drawer close affordance */
#past-draws .sidebar-close-btn,
/* fallback if TSX still uses the original class */
#past-draws .sidebar-controls .btn[aria-label="Close Past Draws"]{
  flex: 0 0 auto;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: var(--touch-target-min);
  min-height: var(--touch-target-min);
  padding: var(--space-2);
  border: 1px solid var(--card-bd);
  background: var(--card);
  border-radius: 8px;
  cursor: pointer;
  font-size: var(--text-lg);
  color: var(--fg);
}
#past-draws .sidebar-close-btn:hover,
#past-draws .sidebar-controls .btn[aria-label="Close Past Draws"]:hover{
  background: var(--accent);
  color: var(--accent-contrast);
}

/* Table visuals (sticky thead, bubble baseline) */
#past-draws .sidebar-table {
  width: 100%;
  border-collapse: collapse;
  table-layout: auto; /* allow date column to size to content */
}

/* Middle row (scroller in non-compact; no-scroll in compact) */
/* (base layout for overflow lives in app/styles/sidebar.css) */
/* Remove top padding so sticky <thead> touches the top of the scroll box */
#past-draws .sidebar-content { padding-top: 0; }
#past-draws .sidebar-table   { margin-top: var(--space-2); } /* replaces that padding */
#past-draws .sidebar-table-container { padding-inline: var(--space-4); padding-bottom: var(--space-4); }

/* Column widths: date = content-sized (no truncation), numbers = flexible */
#past-draws .col-date    { width: auto; }
#past-draws .col-numbers { width: 100%; }

#past-draws .sidebar-table thead th {
  position: sticky;
  top: 0;                 /* stick to the top of the scroller */
  z-index: 2;             /* above row content */
  background: var(--card);
  border-bottom: 1px solid var(--card-bd);
  text-align: left;
  white-space: nowrap;  /* header labels never wrap/truncate */
}
#past-draws .sidebar-table tbody td {
  vertical-align: middle;
}

/* Number bubbles row */
/* Let numbers wrap *within their own cell* if narrow; special stays separate */
#past-draws .numbers-cell {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  flex-wrap: wrap;
}
#past-draws .numbers-sep { margin-inline: var(--space-1); opacity: .6; }
#past-draws .sr-only {
  position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px;
  overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0;
}

/* Date column: always show full date (no ellipsis/truncation) */
#past-draws .date-cell {
  white-space: nowrap;     /* keep on one line */
  overflow: visible;       /* never clip */
  text-overflow: clip;     /* just in case something sets ellipsis globally */
}

#past-draws .sidebar-pagination-info {
  font-size: var(--text-xs);
  color: var(--muted);
  font-variant-numeric: tabular-nums;
}

#past-draws .sidebar-pagination-controls {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

#past-draws .sidebar-page-info {
  font-size: var(--text-xs);
  color: var(--muted);
  margin: 0 var(--space-2);
  font-variant-numeric: tabular-nums;
}

#past-draws .sidebar-nav-text {
  display: inline;
}

#past-draws .sidebar-nav-icon {
  display: none;
}

/* Mobile optimizations for sidebars */
@media (max-width: var(--breakpoint-mobile)) {
  #past-draws .sidebar-header { padding: var(--space-3); }
  
  #past-draws .sidebar-title {
    font-size: var(--text-base);
  }
  #past-draws .sidebar-secondary { gap: var(--space-1); }
  
  /* Show icons, hide text on mobile for space */
  #past-draws .sidebar-sort-btn .sidebar-sort-text,
  #past-draws .sidebar-close-text,
  #past-draws .sidebar-nav-text {
    display: none;
  }
  
  #past-draws .sidebar-sort-btn .sidebar-sort-short,
  #past-draws .sidebar-close-icon,
  #past-draws .sidebar-nav-icon {
    display: inline;
  }
  
  #past-draws .sidebar-compact-label {
    font-size: var(--text-xs);
  }
  
  #past-draws .sidebar-compact-label input[type="checkbox"] {
    min-width: var(--space-5);
    min-height: var(--space-5);
    transform: scale(1.1);
  }
}